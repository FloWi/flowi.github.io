<!DOCTYPE html>
<html lang="en">
<head>
  
    <title> :: Terminal</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="day 20 https://adventofcode.com/2020/day/20
The task is to assemble an image from different 10x10 tiles. The tiles themselves can be flipped and rotated.
transformations I didn&amp;rsquo;t want to calculate the image transformations myself, so I used java&amp;rsquo;s java.awt.geom.AffineTransform. I created a 4x4 testimage with 16 different shades of red to calculate a hash of the overall image to check, which transformation yield the same result.
all 18 possible transformations
 Clockwise180 Clockwise180,FlipHorizontal Clockwise180,FlipVertical Clockwise270 Clockwise270,FlipHorizontal Clockwise270,FlipVertical Clockwise90 Clockwise90,FlipHorizontal Clockwise90,FlipVertical FlipHorizontal FlipHorizontal,Clockwise180 FlipHorizontal,Clockwise270 FlipHorizontal,Clockwise90 FlipVertical FlipVertical,Clockwise180 FlipVertical,Clockwise270 FlipVertical,Clockwise90 NoOp  examples of different transformations yielding the same image    image transformations hash      NoOp 0153045607590105120135150165180195210225    Clockwise270, FlipVertical 0601201801575135195309015021045105165225    FlipVertical, Clockwise90 0601201801575135195309015021045105165225    Clockwise180, FlipVertical 1801952102251201351501656075901050153045    FlipHorizontal 1801952102251201351501656075901050153045    There are only 8 distinct transformations    image transformations hash      NoOp 0153045607590105120135150165180195210225    Clockwise90 4510516522530901502101575135195060120180    Clockwise180 2252101951801651501351201059075604530150    Clockwise270 1801206001951357515210150903022516510545    Clockwise90, FlipVertical 2251651054521015090301951357515180120600    FlipHorizontal 1801952102251201351501656075901050153045    FlipVertical 4530150105907560165150135120225210195180    FlipVertical, Clockwise90 0601201801575135195309015021045105165225    image transformations take this tile from the example input
Tile 1951: #.##...##. #.####...# .....#..## #...###### .##.#....# .###.##### ###.##.##. .###....#. ..#.#..#.# #...##.#.. tiles as images    image transformations image transformations      NoOp  Clockwise90, FlipVertical    Clockwise90  FlipHorizontal    Clockwise180  FlipVertical    Clockwise270  FlipVertical, Clockwise90    calculating edges To find the matching edges I decided to encode the edges of each tile (and its transformed representations) as hashes. For that we take the top, left, bottom and right pixels and convert them into binary representation.
#.##...##. --&amp;gt; 1011000110 = 710 So the top edge of tile 1951 from above is represented as 710.
matching edges To find a matching pair the directions of the matches matter.
match-direction: vertical id1 (top) id2 (bottom) match-direction: horizontal id1 (left) | id2 (right) matching tiles This are all the matching edges.
   tile1 id transformation tile1 tile2 id transformation tile2 match direction hash of matching edge     1171 NoOp 1489 Clockwise180 horizontal 288   1171 FlipVertical 1489 FlipHorizontal horizontal 18   1171 Clockwise90 1489 Clockwise270 vertical 391   1171 FlipVertical, Clockwise90 1489 Clockwise90, FlipVertical vertical 902   1171 Clockwise90 2473 NoOp horizontal 966   1171 Clockwise90, FlipVertical 2473 FlipVertical horizontal 399   1171 Clockwise180 2473 Clockwise90 vertical 96   1171 FlipVertical 2473 FlipVertical, Clockwise90 vertical 24   1427 Clockwise90 1489 Clockwise90 horizontal 948   1427 Clockwise90, FlipVertical 1489 Clockwise90, FlipVertical horizontal 183   1427 Clockwise180 1489 Clockwise180 vertical 300   1427 FlipVertical 1489 FlipVertical vertical 210   1427 FlipVertical, Clockwise90 2311 FlipVertical, Clockwise90 horizontal 210   1427 Clockwise270 2311 Clockwise270 horizontal 300   1427 FlipHorizontal 2311 FlipHorizontal vertical 183   1427 NoOp 2311 NoOp vertical 948   1427 NoOp 2473 Clockwise90 horizontal 234   1427 FlipVertical 2473 Clockwise90, FlipVertical horizontal 348   1427 Clockwise90 2473 Clockwise180 vertical 9   1427 FlipVertical, Clockwise90 2473 FlipVertical vertical 576   1427 FlipHorizontal 2729 FlipHorizontal horizontal 576   1427 Clockwise180 2729 Clockwise180 horizontal 9   1427 Clockwise90, FlipVertical 2729 Clockwise90, FlipVertical vertical 348   1427 Clockwise270 2729 Clockwise270 vertical 234   1489 NoOp 1171 Clockwise180 horizontal 18   1489 FlipVertical 1171 FlipHorizontal horizontal 288   1489 Clockwise90 1171 Clockwise270 vertical 689   1489 FlipVertical, Clockwise90 1171 Clockwise90, FlipVertical vertical 565   1489 FlipVertical, Clockwise90 1427 FlipVertical, Clockwise90 horizontal 948   1489 Clockwise270 1427 Clockwise270 horizontal 183   1489 FlipHorizontal 1427 FlipHorizontal vertical 43   1489 NoOp 1427 NoOp vertical 848   1489 FlipHorizontal 2971 FlipHorizontal horizontal 565   1489 Clockwise180 2971 Clockwise180 horizontal 689   1489 Clockwise90, FlipVertical 2971 Clockwise90, FlipVertical vertical 288   1489 Clockwise270 2971 Clockwise270 vertical 18   1951 NoOp 2311 NoOp horizontal 498   1951 FlipVertical 2311 FlipVertical horizontal 318   1951 Clockwise90 2311 Clockwise90 vertical 587   1951 FlipVertical, Clockwise90 2311 FlipVertical, Clockwise90 vertical 841   1951 Clockwise90 2729 Clockwise90 horizontal 710   1951 Clockwise90, FlipVertical 2729 Clockwise90, FlipVertical horizontal 397   1951 Clockwise180 2729 Clockwise180 vertical 177   1951 FlipVertical 2729 FlipVertical vertical 564   2311 Clockwise90 1427 Clockwise90 horizontal 210   2311 Clockwise90, FlipVertical 1427 Clockwise90, FlipVertical horizontal 300   2311 Clockwise180 1427 Clockwise180 vertical 924   2311 FlipVertical 1427 FlipVertical vertical 231   2311 FlipHorizontal 1951 FlipHorizontal horizontal 498   2311 Clockwise180 1951 Clockwise180 horizontal 318   2311 Clockwise90, FlipVertical 1951 Clockwise90, FlipVertical vertical 616   2311 Clockwise270 1951 Clockwise270 vertical 89   2311 NoOp 3079 FlipVertical horizontal 89   2311 FlipVertical 3079 NoOp horizontal 616   2311 Clockwise90 3079 FlipVertical, Clockwise90 vertical 318   2311 FlipVertical, Clockwise90 3079 Clockwise90 vertical 498   2473 FlipHorizontal 1171 FlipVertical, Clockwise90 horizontal 966   2473 Clockwise180 1171 Clockwise270 horizontal 399   2473 Clockwise90, FlipVertical 1171 FlipHorizontal vertical 184   2473 Clockwise270 1171 NoOp vertical 116   2473 FlipVertical, Clockwise90 1427 FlipHorizontal horizontal 234   2473 Clockwise270 1427 Clockwise180 horizontal 348   2473 FlipHorizontal 1427 Clockwise90, FlipVertical vertical 481   2473 NoOp 1427 Clockwise270 vertical 542   2473 NoOp 3079 Clockwise90, FlipVertical horizontal 116   2473 FlipVertical 3079 Clockwise90 horizontal 184   2473 Clockwise90 3079 FlipVertical vertical 399   2473 FlipVertical, Clockwise90 3079 Clockwise180 vertical 966   2729 NoOp 1427 NoOp horizontal 576   2729 FlipVertical 1427 FlipVertical horizontal 9   2729 Clockwise90 1427 Clockwise90 vertical 962   2729 FlipVertical, Clockwise90 1427 FlipVertical, Clockwise90 vertical 271   2729 FlipVertical, Clockwise90 1951 FlipVertical, Clockwise90 horizontal 710   2729 Clockwise270 1951 Clockwise270 horizontal 397   2729 FlipHorizontal 1951 FlipHorizontal vertical 680   2729 NoOp 1951 NoOp vertical 85   2729 Clockwise90 2971 Clockwise90 horizontal 85   2729 Clockwise90, FlipVertical 2971 Clockwise90, FlipVertical horizontal 680   2729 Clockwise180 2971 Clockwise180 vertical 397   2729 FlipVertical 2971 FlipVertical vertical 710   2971 NoOp 1489 NoOp horizontal 565   2971 FlipVertical 1489 FlipVertical horizontal 689   2971 Clockwise90 1489 Clockwise90 vertical 78   2971 FlipVertical, Clockwise90 1489 FlipVertical, Clockwise90 vertical 456   2971 FlipVertical, Clockwise90 2729 FlipVertical, Clockwise90 horizontal 85   2971 Clockwise270 2729 Clockwise270 horizontal 680   2971 FlipHorizontal 2729 FlipHorizontal vertical 532   2971 NoOp 2729 NoOp vertical 161   3079 FlipHorizontal 2311 Clockwise180 horizontal 616   3079 Clockwise180 2311 FlipHorizontal horizontal 89   3079 Clockwise90, FlipVertical 2311 Clockwise270 vertical 66   3079 Clockwise270 2311 Clockwise90, FlipVertical vertical 264   3079 FlipVertical, Clockwise90 2473 Clockwise180 horizontal 184   3079 Clockwise270 2473 FlipHorizontal horizontal 116   3079 FlipHorizontal 2473 Clockwise270 vertical 501   3079 NoOp 2473 Clockwise90, FlipVertical vertical 702    finding the corner pieces If you count the number of matching tiles for each tile, you can determine their place in the picture.
The tiles with only two matching tiles must be the corners of the picture. Thankfully, Erik designed the puzzle in a way that this property holds.
   tile id number of matches matching tiles     1171 2 1489,2473   1427 4 1489,2311,2473,2729   1489 3 1171,1427,2971   1951 2 2311,2729   2311 3 1427,1951,3079   2473 3 1171,1427,3079   2729 3 1427,1951,2971   2971 2 1489,2729   3079 2 2311,2473    So, our corners are these tiles.
   tile id matching tiles     1171 1489,2473   1951 2311,2729   2971 1489,2729   3079 2311,2473    assembling the picture Assembling the picture turns out to be quite complex. First, we have to pick one of the four corner pieces and assume, this is our top-left tile.
Let&amp;rsquo;s pick the aforementioned corner-tile 1951 as our top-left cornerpiece.
We now have to figure out how to transform it in a way, such that the matching edges are on the inside - or, we flip it around and look for the edges that face outwards.
finding the outer edges    tile ids number of tiles with that edge edge hash     &amp;hellip; &amp;hellip; &amp;hellip;   1427, 1489 2 948   1951 1 177   1951 1 564   1951 1 587   1951 1 841   1951, 2311 2 318   1951, 2729 2 397   1951, 2311 2 498   1951, 2729 2 710   2311 1 231   &amp;hellip; &amp;hellip; &amp;hellip;    We now have to pick those transformations where the top and left edge have one of those hashes (177, 564, 587, 841)
finding correct transformations of 1951 to make it a cornerpiece with the correct edges facing outwards Here are the edge-configurations of every possible transformation of tile 1951.
   transformation top left bottom right     Clockwise180 177 318 397 587   Clockwise90, FlipVertical 318 177 587 397   FlipHorizontal 397 498 177 841   Clockwise270 498 397 841 177   FlipVertical 564 587 710 318   Clockwise90 587 564 318 710   NoOp 710 841 564 498   FlipVertical, Clockwise90 841 710 498 564    We now know, that there are only two valid transformations of tile 1951: FlipVertical and Clockwise90.
With this information we can orient the neighbors of 1951 properly.
orienting the neighbors We know from above that 1951 only has two possible neighbors.
   tile id matching tiles     1951 2311,2729    Let&amp;rsquo;s expand that relationship further.
   tile1 id transformation tile1 tile2 id transformation tile2 match direction hash of matching edge     1951 FlipVertical 2311 FlipVertical horizontal 318   1951 FlipVertical 2729 FlipVertical vertical 564   1951 Clockwise90 2729 Clockwise90 horizontal 710   1951 Clockwise90 2311 Clockwise90 vertical 587    We have two possibilities to arange these pieces
   y\x 0 1     0 1951 FlipVertical  2311 FlipVertical    1 2729 FlipVertical         y\x 0 1     0 1951 Clockwise90  2729 Clockwise90    1 2311 Clockwise90      " />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="/adventofcode/2020/day20/readme/" />




<link rel="stylesheet" href="/assets/style.css">






<link rel="apple-touch-icon" href="/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />

  
    <meta name="twitter:site" content="" />
  
    <meta name="twitter:creator" content="" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="">
<meta property="og:description" content="day 20 https://adventofcode.com/2020/day/20
The task is to assemble an image from different 10x10 tiles. The tiles themselves can be flipped and rotated.
transformations I didn&amp;rsquo;t want to calculate the image transformations myself, so I used java&amp;rsquo;s java.awt.geom.AffineTransform. I created a 4x4 testimage with 16 different shades of red to calculate a hash of the overall image to check, which transformation yield the same result.
all 18 possible transformations
 Clockwise180 Clockwise180,FlipHorizontal Clockwise180,FlipVertical Clockwise270 Clockwise270,FlipHorizontal Clockwise270,FlipVertical Clockwise90 Clockwise90,FlipHorizontal Clockwise90,FlipVertical FlipHorizontal FlipHorizontal,Clockwise180 FlipHorizontal,Clockwise270 FlipHorizontal,Clockwise90 FlipVertical FlipVertical,Clockwise180 FlipVertical,Clockwise270 FlipVertical,Clockwise90 NoOp  examples of different transformations yielding the same image    image transformations hash      NoOp 0153045607590105120135150165180195210225    Clockwise270, FlipVertical 0601201801575135195309015021045105165225    FlipVertical, Clockwise90 0601201801575135195309015021045105165225    Clockwise180, FlipVertical 1801952102251201351501656075901050153045    FlipHorizontal 1801952102251201351501656075901050153045    There are only 8 distinct transformations    image transformations hash      NoOp 0153045607590105120135150165180195210225    Clockwise90 4510516522530901502101575135195060120180    Clockwise180 2252101951801651501351201059075604530150    Clockwise270 1801206001951357515210150903022516510545    Clockwise90, FlipVertical 2251651054521015090301951357515180120600    FlipHorizontal 1801952102251201351501656075901050153045    FlipVertical 4530150105907560165150135120225210195180    FlipVertical, Clockwise90 0601201801575135195309015021045105165225    image transformations take this tile from the example input
Tile 1951: #.##...##. #.####...# .....#..## #...###### .##.#....# .###.##### ###.##.##. .###....#. ..#.#..#.# #...##.#.. tiles as images    image transformations image transformations      NoOp  Clockwise90, FlipVertical    Clockwise90  FlipHorizontal    Clockwise180  FlipVertical    Clockwise270  FlipVertical, Clockwise90    calculating edges To find the matching edges I decided to encode the edges of each tile (and its transformed representations) as hashes. For that we take the top, left, bottom and right pixels and convert them into binary representation.
#.##...##. --&amp;gt; 1011000110 = 710 So the top edge of tile 1951 from above is represented as 710.
matching edges To find a matching pair the directions of the matches matter.
match-direction: vertical id1 (top) id2 (bottom) match-direction: horizontal id1 (left) | id2 (right) matching tiles This are all the matching edges.
   tile1 id transformation tile1 tile2 id transformation tile2 match direction hash of matching edge     1171 NoOp 1489 Clockwise180 horizontal 288   1171 FlipVertical 1489 FlipHorizontal horizontal 18   1171 Clockwise90 1489 Clockwise270 vertical 391   1171 FlipVertical, Clockwise90 1489 Clockwise90, FlipVertical vertical 902   1171 Clockwise90 2473 NoOp horizontal 966   1171 Clockwise90, FlipVertical 2473 FlipVertical horizontal 399   1171 Clockwise180 2473 Clockwise90 vertical 96   1171 FlipVertical 2473 FlipVertical, Clockwise90 vertical 24   1427 Clockwise90 1489 Clockwise90 horizontal 948   1427 Clockwise90, FlipVertical 1489 Clockwise90, FlipVertical horizontal 183   1427 Clockwise180 1489 Clockwise180 vertical 300   1427 FlipVertical 1489 FlipVertical vertical 210   1427 FlipVertical, Clockwise90 2311 FlipVertical, Clockwise90 horizontal 210   1427 Clockwise270 2311 Clockwise270 horizontal 300   1427 FlipHorizontal 2311 FlipHorizontal vertical 183   1427 NoOp 2311 NoOp vertical 948   1427 NoOp 2473 Clockwise90 horizontal 234   1427 FlipVertical 2473 Clockwise90, FlipVertical horizontal 348   1427 Clockwise90 2473 Clockwise180 vertical 9   1427 FlipVertical, Clockwise90 2473 FlipVertical vertical 576   1427 FlipHorizontal 2729 FlipHorizontal horizontal 576   1427 Clockwise180 2729 Clockwise180 horizontal 9   1427 Clockwise90, FlipVertical 2729 Clockwise90, FlipVertical vertical 348   1427 Clockwise270 2729 Clockwise270 vertical 234   1489 NoOp 1171 Clockwise180 horizontal 18   1489 FlipVertical 1171 FlipHorizontal horizontal 288   1489 Clockwise90 1171 Clockwise270 vertical 689   1489 FlipVertical, Clockwise90 1171 Clockwise90, FlipVertical vertical 565   1489 FlipVertical, Clockwise90 1427 FlipVertical, Clockwise90 horizontal 948   1489 Clockwise270 1427 Clockwise270 horizontal 183   1489 FlipHorizontal 1427 FlipHorizontal vertical 43   1489 NoOp 1427 NoOp vertical 848   1489 FlipHorizontal 2971 FlipHorizontal horizontal 565   1489 Clockwise180 2971 Clockwise180 horizontal 689   1489 Clockwise90, FlipVertical 2971 Clockwise90, FlipVertical vertical 288   1489 Clockwise270 2971 Clockwise270 vertical 18   1951 NoOp 2311 NoOp horizontal 498   1951 FlipVertical 2311 FlipVertical horizontal 318   1951 Clockwise90 2311 Clockwise90 vertical 587   1951 FlipVertical, Clockwise90 2311 FlipVertical, Clockwise90 vertical 841   1951 Clockwise90 2729 Clockwise90 horizontal 710   1951 Clockwise90, FlipVertical 2729 Clockwise90, FlipVertical horizontal 397   1951 Clockwise180 2729 Clockwise180 vertical 177   1951 FlipVertical 2729 FlipVertical vertical 564   2311 Clockwise90 1427 Clockwise90 horizontal 210   2311 Clockwise90, FlipVertical 1427 Clockwise90, FlipVertical horizontal 300   2311 Clockwise180 1427 Clockwise180 vertical 924   2311 FlipVertical 1427 FlipVertical vertical 231   2311 FlipHorizontal 1951 FlipHorizontal horizontal 498   2311 Clockwise180 1951 Clockwise180 horizontal 318   2311 Clockwise90, FlipVertical 1951 Clockwise90, FlipVertical vertical 616   2311 Clockwise270 1951 Clockwise270 vertical 89   2311 NoOp 3079 FlipVertical horizontal 89   2311 FlipVertical 3079 NoOp horizontal 616   2311 Clockwise90 3079 FlipVertical, Clockwise90 vertical 318   2311 FlipVertical, Clockwise90 3079 Clockwise90 vertical 498   2473 FlipHorizontal 1171 FlipVertical, Clockwise90 horizontal 966   2473 Clockwise180 1171 Clockwise270 horizontal 399   2473 Clockwise90, FlipVertical 1171 FlipHorizontal vertical 184   2473 Clockwise270 1171 NoOp vertical 116   2473 FlipVertical, Clockwise90 1427 FlipHorizontal horizontal 234   2473 Clockwise270 1427 Clockwise180 horizontal 348   2473 FlipHorizontal 1427 Clockwise90, FlipVertical vertical 481   2473 NoOp 1427 Clockwise270 vertical 542   2473 NoOp 3079 Clockwise90, FlipVertical horizontal 116   2473 FlipVertical 3079 Clockwise90 horizontal 184   2473 Clockwise90 3079 FlipVertical vertical 399   2473 FlipVertical, Clockwise90 3079 Clockwise180 vertical 966   2729 NoOp 1427 NoOp horizontal 576   2729 FlipVertical 1427 FlipVertical horizontal 9   2729 Clockwise90 1427 Clockwise90 vertical 962   2729 FlipVertical, Clockwise90 1427 FlipVertical, Clockwise90 vertical 271   2729 FlipVertical, Clockwise90 1951 FlipVertical, Clockwise90 horizontal 710   2729 Clockwise270 1951 Clockwise270 horizontal 397   2729 FlipHorizontal 1951 FlipHorizontal vertical 680   2729 NoOp 1951 NoOp vertical 85   2729 Clockwise90 2971 Clockwise90 horizontal 85   2729 Clockwise90, FlipVertical 2971 Clockwise90, FlipVertical horizontal 680   2729 Clockwise180 2971 Clockwise180 vertical 397   2729 FlipVertical 2971 FlipVertical vertical 710   2971 NoOp 1489 NoOp horizontal 565   2971 FlipVertical 1489 FlipVertical horizontal 689   2971 Clockwise90 1489 Clockwise90 vertical 78   2971 FlipVertical, Clockwise90 1489 FlipVertical, Clockwise90 vertical 456   2971 FlipVertical, Clockwise90 2729 FlipVertical, Clockwise90 horizontal 85   2971 Clockwise270 2729 Clockwise270 horizontal 680   2971 FlipHorizontal 2729 FlipHorizontal vertical 532   2971 NoOp 2729 NoOp vertical 161   3079 FlipHorizontal 2311 Clockwise180 horizontal 616   3079 Clockwise180 2311 FlipHorizontal horizontal 89   3079 Clockwise90, FlipVertical 2311 Clockwise270 vertical 66   3079 Clockwise270 2311 Clockwise90, FlipVertical vertical 264   3079 FlipVertical, Clockwise90 2473 Clockwise180 horizontal 184   3079 Clockwise270 2473 FlipHorizontal horizontal 116   3079 FlipHorizontal 2473 Clockwise270 vertical 501   3079 NoOp 2473 Clockwise90, FlipVertical vertical 702    finding the corner pieces If you count the number of matching tiles for each tile, you can determine their place in the picture.
The tiles with only two matching tiles must be the corners of the picture. Thankfully, Erik designed the puzzle in a way that this property holds.
   tile id number of matches matching tiles     1171 2 1489,2473   1427 4 1489,2311,2473,2729   1489 3 1171,1427,2971   1951 2 2311,2729   2311 3 1427,1951,3079   2473 3 1171,1427,3079   2729 3 1427,1951,2971   2971 2 1489,2729   3079 2 2311,2473    So, our corners are these tiles.
   tile id matching tiles     1171 1489,2473   1951 2311,2729   2971 1489,2729   3079 2311,2473    assembling the picture Assembling the picture turns out to be quite complex. First, we have to pick one of the four corner pieces and assume, this is our top-left tile.
Let&amp;rsquo;s pick the aforementioned corner-tile 1951 as our top-left cornerpiece.
We now have to figure out how to transform it in a way, such that the matching edges are on the inside - or, we flip it around and look for the edges that face outwards.
finding the outer edges    tile ids number of tiles with that edge edge hash     &amp;hellip; &amp;hellip; &amp;hellip;   1427, 1489 2 948   1951 1 177   1951 1 564   1951 1 587   1951 1 841   1951, 2311 2 318   1951, 2729 2 397   1951, 2311 2 498   1951, 2729 2 710   2311 1 231   &amp;hellip; &amp;hellip; &amp;hellip;    We now have to pick those transformations where the top and left edge have one of those hashes (177, 564, 587, 841)
finding correct transformations of 1951 to make it a cornerpiece with the correct edges facing outwards Here are the edge-configurations of every possible transformation of tile 1951.
   transformation top left bottom right     Clockwise180 177 318 397 587   Clockwise90, FlipVertical 318 177 587 397   FlipHorizontal 397 498 177 841   Clockwise270 498 397 841 177   FlipVertical 564 587 710 318   Clockwise90 587 564 318 710   NoOp 710 841 564 498   FlipVertical, Clockwise90 841 710 498 564    We now know, that there are only two valid transformations of tile 1951: FlipVertical and Clockwise90.
With this information we can orient the neighbors of 1951 properly.
orienting the neighbors We know from above that 1951 only has two possible neighbors.
   tile id matching tiles     1951 2311,2729    Let&amp;rsquo;s expand that relationship further.
   tile1 id transformation tile1 tile2 id transformation tile2 match direction hash of matching edge     1951 FlipVertical 2311 FlipVertical horizontal 318   1951 FlipVertical 2729 FlipVertical vertical 564   1951 Clockwise90 2729 Clockwise90 horizontal 710   1951 Clockwise90 2311 Clockwise90 vertical 587    We have two possibilities to arange these pieces
   y\x 0 1     0 1951 FlipVertical  2311 FlipVertical    1 2729 FlipVertical         y\x 0 1     0 1951 Clockwise90  2729 Clockwise90    1 2311 Clockwise90      " />
<meta property="og:url" content="/adventofcode/2020/day20/readme/" />
<meta property="og:site_name" content="Terminal" />

  
    <meta property="og:image" content="/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">













</head>
<body class="orange">


<div class="container headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Terminal
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/showcase">Showcase</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/adventofcode/2020/day20/readme/"></a></h1>
  <div class="post-meta">
    
    
  </div>

  

  

  

  <div class="post-content"><div>
        <h1 id="day-20">day 20<a href="#day-20" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h1>
<p><a href="https://adventofcode.com/2020/day/20">https://adventofcode.com/2020/day/20</a></p>
<p>The task is to assemble an image from different 10x10 tiles. The tiles themselves can be flipped and rotated.</p>
<h2 id="transformations">transformations<a href="#transformations" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>I didn&rsquo;t want to calculate the image transformations myself, so I used java&rsquo;s <code>java.awt.geom.AffineTransform</code>.
I created a 4x4 testimage with 16 different shades of red to calculate a hash of the overall image to check, which transformation yield the same result.</p>
<p>all 18 possible transformations</p>
<ul>
<li>Clockwise180</li>
<li>Clockwise180,FlipHorizontal</li>
<li>Clockwise180,FlipVertical</li>
<li>Clockwise270</li>
<li>Clockwise270,FlipHorizontal</li>
<li>Clockwise270,FlipVertical</li>
<li>Clockwise90</li>
<li>Clockwise90,FlipHorizontal</li>
<li>Clockwise90,FlipVertical</li>
<li>FlipHorizontal</li>
<li>FlipHorizontal,Clockwise180</li>
<li>FlipHorizontal,Clockwise270</li>
<li>FlipHorizontal,Clockwise90</li>
<li>FlipVertical</li>
<li>FlipVertical,Clockwise180</li>
<li>FlipVertical,Clockwise270</li>
<li>FlipVertical,Clockwise90</li>
<li>NoOp</li>
</ul>
<h3 id="examples-of-different-transformations-yielding-the-same-image">examples of different transformations yielding the same image<a href="#examples-of-different-transformations-yielding-the-same-image" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<table>
<thead>
<tr>
<th>image</th>
<th>transformations</th>
<th>hash</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --></td>
<td>NoOp</td>
<td>0153045607590105120135150165180195210225</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise270, FlipVertical</td>
<td>0601201801575135195309015021045105165225</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>FlipVertical, Clockwise90</td>
<td>0601201801575135195309015021045105165225</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise180, FlipVertical</td>
<td>1801952102251201351501656075901050153045</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>FlipHorizontal</td>
<td>1801952102251201351501656075901050153045</td>
</tr>
</tbody>
</table>
<h3 id="there-are-only-8-distinct-transformations">There are only 8 distinct transformations<a href="#there-are-only-8-distinct-transformations" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<table>
<thead>
<tr>
<th>image</th>
<th>transformations</th>
<th>hash</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --></td>
<td>NoOp</td>
<td>0153045607590105120135150165180195210225</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise90</td>
<td>4510516522530901502101575135195060120180</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise180</td>
<td>2252101951801651501351201059075604530150</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise270</td>
<td>1801206001951357515210150903022516510545</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise90, FlipVertical</td>
<td>2251651054521015090301951357515180120600</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>FlipHorizontal</td>
<td>1801952102251201351501656075901050153045</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>FlipVertical</td>
<td>4530150105907560165150135120225210195180</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>FlipVertical, Clockwise90</td>
<td>0601201801575135195309015021045105165225</td>
</tr>
</tbody>
</table>
<h2 id="image-transformations">image transformations<a href="#image-transformations" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>take this tile from the example input</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">Tile 1951:
#.##...##.
#.####...#
.....#..##
#...######
.##.#....#
.###.#####
###.##.##.
.###....#.
..#.#..#.#
#...##.#..
</code></pre></div><h3 id="tiles-as-images">tiles as images<a href="#tiles-as-images" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<table>
<thead>
<tr>
<th>image</th>
<th>transformations</th>
<th>image</th>
<th>transformations</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --></td>
<td>NoOp</td>
<td><!-- raw HTML omitted --></td>
<td>Clockwise90, FlipVertical</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise90</td>
<td><!-- raw HTML omitted --></td>
<td>FlipHorizontal</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise180</td>
<td><!-- raw HTML omitted --></td>
<td>FlipVertical</td>
</tr>
<tr>
<td><!-- raw HTML omitted --></td>
<td>Clockwise270</td>
<td><!-- raw HTML omitted --></td>
<td>FlipVertical, Clockwise90</td>
</tr>
</tbody>
</table>
<h2 id="calculating-edges">calculating edges<a href="#calculating-edges" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>To find the matching edges I decided to encode the edges of each tile (and its transformed representations) as hashes.
For that we take the top, left, bottom and right pixels and convert them into binary representation.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">#.##...##. --&gt;
1011000110 = 710
</code></pre></div><p>So the top edge of tile 1951 from above is represented as 710.</p>
<h2 id="matching-edges">matching edges<a href="#matching-edges" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>To find a matching pair the directions of the matches matter.</p>
<h3 id="match-direction-vertical">match-direction: vertical<a href="#match-direction-vertical" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">id1 (top)
id2 (bottom)
</code></pre></div><h3 id="match-direction-horizontal">match-direction: horizontal<a href="#match-direction-horizontal" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">id1 (left) | id2 (right)
</code></pre></div><h3 id="matching-tiles">matching tiles<a href="#matching-tiles" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>This are all the matching edges.</p>
<table>
<thead>
<tr>
<th>tile1 id</th>
<th>transformation tile1</th>
<th>tile2 id</th>
<th>transformation tile2</th>
<th>match direction</th>
<th>hash of matching edge</th>
</tr>
</thead>
<tbody>
<tr>
<td>1171</td>
<td>NoOp</td>
<td>1489</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>288</td>
</tr>
<tr>
<td>1171</td>
<td>FlipVertical</td>
<td>1489</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>18</td>
</tr>
<tr>
<td>1171</td>
<td>Clockwise90</td>
<td>1489</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>391</td>
</tr>
<tr>
<td>1171</td>
<td>FlipVertical, Clockwise90</td>
<td>1489</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>902</td>
</tr>
<tr>
<td>1171</td>
<td>Clockwise90</td>
<td>2473</td>
<td>NoOp</td>
<td>horizontal</td>
<td>966</td>
</tr>
<tr>
<td>1171</td>
<td>Clockwise90, FlipVertical</td>
<td>2473</td>
<td>FlipVertical</td>
<td>horizontal</td>
<td>399</td>
</tr>
<tr>
<td>1171</td>
<td>Clockwise180</td>
<td>2473</td>
<td>Clockwise90</td>
<td>vertical</td>
<td>96</td>
</tr>
<tr>
<td>1171</td>
<td>FlipVertical</td>
<td>2473</td>
<td>FlipVertical, Clockwise90</td>
<td>vertical</td>
<td>24</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise90</td>
<td>1489</td>
<td>Clockwise90</td>
<td>horizontal</td>
<td>948</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise90, FlipVertical</td>
<td>1489</td>
<td>Clockwise90, FlipVertical</td>
<td>horizontal</td>
<td>183</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise180</td>
<td>1489</td>
<td>Clockwise180</td>
<td>vertical</td>
<td>300</td>
</tr>
<tr>
<td>1427</td>
<td>FlipVertical</td>
<td>1489</td>
<td>FlipVertical</td>
<td>vertical</td>
<td>210</td>
</tr>
<tr>
<td>1427</td>
<td>FlipVertical, Clockwise90</td>
<td>2311</td>
<td>FlipVertical, Clockwise90</td>
<td>horizontal</td>
<td>210</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise270</td>
<td>2311</td>
<td>Clockwise270</td>
<td>horizontal</td>
<td>300</td>
</tr>
<tr>
<td>1427</td>
<td>FlipHorizontal</td>
<td>2311</td>
<td>FlipHorizontal</td>
<td>vertical</td>
<td>183</td>
</tr>
<tr>
<td>1427</td>
<td>NoOp</td>
<td>2311</td>
<td>NoOp</td>
<td>vertical</td>
<td>948</td>
</tr>
<tr>
<td>1427</td>
<td>NoOp</td>
<td>2473</td>
<td>Clockwise90</td>
<td>horizontal</td>
<td>234</td>
</tr>
<tr>
<td>1427</td>
<td>FlipVertical</td>
<td>2473</td>
<td>Clockwise90, FlipVertical</td>
<td>horizontal</td>
<td>348</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise90</td>
<td>2473</td>
<td>Clockwise180</td>
<td>vertical</td>
<td>9</td>
</tr>
<tr>
<td>1427</td>
<td>FlipVertical, Clockwise90</td>
<td>2473</td>
<td>FlipVertical</td>
<td>vertical</td>
<td>576</td>
</tr>
<tr>
<td>1427</td>
<td>FlipHorizontal</td>
<td>2729</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>576</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise180</td>
<td>2729</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>9</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise90, FlipVertical</td>
<td>2729</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>348</td>
</tr>
<tr>
<td>1427</td>
<td>Clockwise270</td>
<td>2729</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>234</td>
</tr>
<tr>
<td>1489</td>
<td>NoOp</td>
<td>1171</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>18</td>
</tr>
<tr>
<td>1489</td>
<td>FlipVertical</td>
<td>1171</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>288</td>
</tr>
<tr>
<td>1489</td>
<td>Clockwise90</td>
<td>1171</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>689</td>
</tr>
<tr>
<td>1489</td>
<td>FlipVertical, Clockwise90</td>
<td>1171</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>565</td>
</tr>
<tr>
<td>1489</td>
<td>FlipVertical, Clockwise90</td>
<td>1427</td>
<td>FlipVertical, Clockwise90</td>
<td>horizontal</td>
<td>948</td>
</tr>
<tr>
<td>1489</td>
<td>Clockwise270</td>
<td>1427</td>
<td>Clockwise270</td>
<td>horizontal</td>
<td>183</td>
</tr>
<tr>
<td>1489</td>
<td>FlipHorizontal</td>
<td>1427</td>
<td>FlipHorizontal</td>
<td>vertical</td>
<td>43</td>
</tr>
<tr>
<td>1489</td>
<td>NoOp</td>
<td>1427</td>
<td>NoOp</td>
<td>vertical</td>
<td>848</td>
</tr>
<tr>
<td>1489</td>
<td>FlipHorizontal</td>
<td>2971</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>565</td>
</tr>
<tr>
<td>1489</td>
<td>Clockwise180</td>
<td>2971</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>689</td>
</tr>
<tr>
<td>1489</td>
<td>Clockwise90, FlipVertical</td>
<td>2971</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>288</td>
</tr>
<tr>
<td>1489</td>
<td>Clockwise270</td>
<td>2971</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>18</td>
</tr>
<tr>
<td>1951</td>
<td>NoOp</td>
<td>2311</td>
<td>NoOp</td>
<td>horizontal</td>
<td>498</td>
</tr>
<tr>
<td>1951</td>
<td>FlipVertical</td>
<td>2311</td>
<td>FlipVertical</td>
<td>horizontal</td>
<td>318</td>
</tr>
<tr>
<td>1951</td>
<td>Clockwise90</td>
<td>2311</td>
<td>Clockwise90</td>
<td>vertical</td>
<td>587</td>
</tr>
<tr>
<td>1951</td>
<td>FlipVertical, Clockwise90</td>
<td>2311</td>
<td>FlipVertical, Clockwise90</td>
<td>vertical</td>
<td>841</td>
</tr>
<tr>
<td>1951</td>
<td>Clockwise90</td>
<td>2729</td>
<td>Clockwise90</td>
<td>horizontal</td>
<td>710</td>
</tr>
<tr>
<td>1951</td>
<td>Clockwise90, FlipVertical</td>
<td>2729</td>
<td>Clockwise90, FlipVertical</td>
<td>horizontal</td>
<td>397</td>
</tr>
<tr>
<td>1951</td>
<td>Clockwise180</td>
<td>2729</td>
<td>Clockwise180</td>
<td>vertical</td>
<td>177</td>
</tr>
<tr>
<td>1951</td>
<td>FlipVertical</td>
<td>2729</td>
<td>FlipVertical</td>
<td>vertical</td>
<td>564</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise90</td>
<td>1427</td>
<td>Clockwise90</td>
<td>horizontal</td>
<td>210</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise90, FlipVertical</td>
<td>1427</td>
<td>Clockwise90, FlipVertical</td>
<td>horizontal</td>
<td>300</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise180</td>
<td>1427</td>
<td>Clockwise180</td>
<td>vertical</td>
<td>924</td>
</tr>
<tr>
<td>2311</td>
<td>FlipVertical</td>
<td>1427</td>
<td>FlipVertical</td>
<td>vertical</td>
<td>231</td>
</tr>
<tr>
<td>2311</td>
<td>FlipHorizontal</td>
<td>1951</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>498</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise180</td>
<td>1951</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>318</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise90, FlipVertical</td>
<td>1951</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>616</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise270</td>
<td>1951</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>89</td>
</tr>
<tr>
<td>2311</td>
<td>NoOp</td>
<td>3079</td>
<td>FlipVertical</td>
<td>horizontal</td>
<td>89</td>
</tr>
<tr>
<td>2311</td>
<td>FlipVertical</td>
<td>3079</td>
<td>NoOp</td>
<td>horizontal</td>
<td>616</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise90</td>
<td>3079</td>
<td>FlipVertical, Clockwise90</td>
<td>vertical</td>
<td>318</td>
</tr>
<tr>
<td>2311</td>
<td>FlipVertical, Clockwise90</td>
<td>3079</td>
<td>Clockwise90</td>
<td>vertical</td>
<td>498</td>
</tr>
<tr>
<td>2473</td>
<td>FlipHorizontal</td>
<td>1171</td>
<td>FlipVertical, Clockwise90</td>
<td>horizontal</td>
<td>966</td>
</tr>
<tr>
<td>2473</td>
<td>Clockwise180</td>
<td>1171</td>
<td>Clockwise270</td>
<td>horizontal</td>
<td>399</td>
</tr>
<tr>
<td>2473</td>
<td>Clockwise90, FlipVertical</td>
<td>1171</td>
<td>FlipHorizontal</td>
<td>vertical</td>
<td>184</td>
</tr>
<tr>
<td>2473</td>
<td>Clockwise270</td>
<td>1171</td>
<td>NoOp</td>
<td>vertical</td>
<td>116</td>
</tr>
<tr>
<td>2473</td>
<td>FlipVertical, Clockwise90</td>
<td>1427</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>234</td>
</tr>
<tr>
<td>2473</td>
<td>Clockwise270</td>
<td>1427</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>348</td>
</tr>
<tr>
<td>2473</td>
<td>FlipHorizontal</td>
<td>1427</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>481</td>
</tr>
<tr>
<td>2473</td>
<td>NoOp</td>
<td>1427</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>542</td>
</tr>
<tr>
<td>2473</td>
<td>NoOp</td>
<td>3079</td>
<td>Clockwise90, FlipVertical</td>
<td>horizontal</td>
<td>116</td>
</tr>
<tr>
<td>2473</td>
<td>FlipVertical</td>
<td>3079</td>
<td>Clockwise90</td>
<td>horizontal</td>
<td>184</td>
</tr>
<tr>
<td>2473</td>
<td>Clockwise90</td>
<td>3079</td>
<td>FlipVertical</td>
<td>vertical</td>
<td>399</td>
</tr>
<tr>
<td>2473</td>
<td>FlipVertical, Clockwise90</td>
<td>3079</td>
<td>Clockwise180</td>
<td>vertical</td>
<td>966</td>
</tr>
<tr>
<td>2729</td>
<td>NoOp</td>
<td>1427</td>
<td>NoOp</td>
<td>horizontal</td>
<td>576</td>
</tr>
<tr>
<td>2729</td>
<td>FlipVertical</td>
<td>1427</td>
<td>FlipVertical</td>
<td>horizontal</td>
<td>9</td>
</tr>
<tr>
<td>2729</td>
<td>Clockwise90</td>
<td>1427</td>
<td>Clockwise90</td>
<td>vertical</td>
<td>962</td>
</tr>
<tr>
<td>2729</td>
<td>FlipVertical, Clockwise90</td>
<td>1427</td>
<td>FlipVertical, Clockwise90</td>
<td>vertical</td>
<td>271</td>
</tr>
<tr>
<td>2729</td>
<td>FlipVertical, Clockwise90</td>
<td>1951</td>
<td>FlipVertical, Clockwise90</td>
<td>horizontal</td>
<td>710</td>
</tr>
<tr>
<td>2729</td>
<td>Clockwise270</td>
<td>1951</td>
<td>Clockwise270</td>
<td>horizontal</td>
<td>397</td>
</tr>
<tr>
<td>2729</td>
<td>FlipHorizontal</td>
<td>1951</td>
<td>FlipHorizontal</td>
<td>vertical</td>
<td>680</td>
</tr>
<tr>
<td>2729</td>
<td>NoOp</td>
<td>1951</td>
<td>NoOp</td>
<td>vertical</td>
<td>85</td>
</tr>
<tr>
<td>2729</td>
<td>Clockwise90</td>
<td>2971</td>
<td>Clockwise90</td>
<td>horizontal</td>
<td>85</td>
</tr>
<tr>
<td>2729</td>
<td>Clockwise90, FlipVertical</td>
<td>2971</td>
<td>Clockwise90, FlipVertical</td>
<td>horizontal</td>
<td>680</td>
</tr>
<tr>
<td>2729</td>
<td>Clockwise180</td>
<td>2971</td>
<td>Clockwise180</td>
<td>vertical</td>
<td>397</td>
</tr>
<tr>
<td>2729</td>
<td>FlipVertical</td>
<td>2971</td>
<td>FlipVertical</td>
<td>vertical</td>
<td>710</td>
</tr>
<tr>
<td>2971</td>
<td>NoOp</td>
<td>1489</td>
<td>NoOp</td>
<td>horizontal</td>
<td>565</td>
</tr>
<tr>
<td>2971</td>
<td>FlipVertical</td>
<td>1489</td>
<td>FlipVertical</td>
<td>horizontal</td>
<td>689</td>
</tr>
<tr>
<td>2971</td>
<td>Clockwise90</td>
<td>1489</td>
<td>Clockwise90</td>
<td>vertical</td>
<td>78</td>
</tr>
<tr>
<td>2971</td>
<td>FlipVertical, Clockwise90</td>
<td>1489</td>
<td>FlipVertical, Clockwise90</td>
<td>vertical</td>
<td>456</td>
</tr>
<tr>
<td>2971</td>
<td>FlipVertical, Clockwise90</td>
<td>2729</td>
<td>FlipVertical, Clockwise90</td>
<td>horizontal</td>
<td>85</td>
</tr>
<tr>
<td>2971</td>
<td>Clockwise270</td>
<td>2729</td>
<td>Clockwise270</td>
<td>horizontal</td>
<td>680</td>
</tr>
<tr>
<td>2971</td>
<td>FlipHorizontal</td>
<td>2729</td>
<td>FlipHorizontal</td>
<td>vertical</td>
<td>532</td>
</tr>
<tr>
<td>2971</td>
<td>NoOp</td>
<td>2729</td>
<td>NoOp</td>
<td>vertical</td>
<td>161</td>
</tr>
<tr>
<td>3079</td>
<td>FlipHorizontal</td>
<td>2311</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>616</td>
</tr>
<tr>
<td>3079</td>
<td>Clockwise180</td>
<td>2311</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>89</td>
</tr>
<tr>
<td>3079</td>
<td>Clockwise90, FlipVertical</td>
<td>2311</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>66</td>
</tr>
<tr>
<td>3079</td>
<td>Clockwise270</td>
<td>2311</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>264</td>
</tr>
<tr>
<td>3079</td>
<td>FlipVertical, Clockwise90</td>
<td>2473</td>
<td>Clockwise180</td>
<td>horizontal</td>
<td>184</td>
</tr>
<tr>
<td>3079</td>
<td>Clockwise270</td>
<td>2473</td>
<td>FlipHorizontal</td>
<td>horizontal</td>
<td>116</td>
</tr>
<tr>
<td>3079</td>
<td>FlipHorizontal</td>
<td>2473</td>
<td>Clockwise270</td>
<td>vertical</td>
<td>501</td>
</tr>
<tr>
<td>3079</td>
<td>NoOp</td>
<td>2473</td>
<td>Clockwise90, FlipVertical</td>
<td>vertical</td>
<td>702</td>
</tr>
</tbody>
</table>
<h2 id="finding-the-corner-pieces">finding the corner pieces<a href="#finding-the-corner-pieces" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>If you count the number of matching tiles for each tile, you can determine their place in the picture.</p>
<p>The tiles with only two matching tiles must be the corners of the picture. Thankfully, Erik designed the puzzle in a way that this property holds.</p>
<table>
<thead>
<tr>
<th>tile id</th>
<th>number of matches</th>
<th>matching tiles</th>
</tr>
</thead>
<tbody>
<tr>
<td>1171</td>
<td>2</td>
<td>1489,2473</td>
</tr>
<tr>
<td>1427</td>
<td>4</td>
<td>1489,2311,2473,2729</td>
</tr>
<tr>
<td>1489</td>
<td>3</td>
<td>1171,1427,2971</td>
</tr>
<tr>
<td>1951</td>
<td>2</td>
<td>2311,2729</td>
</tr>
<tr>
<td>2311</td>
<td>3</td>
<td>1427,1951,3079</td>
</tr>
<tr>
<td>2473</td>
<td>3</td>
<td>1171,1427,3079</td>
</tr>
<tr>
<td>2729</td>
<td>3</td>
<td>1427,1951,2971</td>
</tr>
<tr>
<td>2971</td>
<td>2</td>
<td>1489,2729</td>
</tr>
<tr>
<td>3079</td>
<td>2</td>
<td>2311,2473</td>
</tr>
</tbody>
</table>
<p>So, our corners are these tiles.</p>
<table>
<thead>
<tr>
<th>tile id</th>
<th>matching tiles</th>
</tr>
</thead>
<tbody>
<tr>
<td>1171</td>
<td>1489,2473</td>
</tr>
<tr>
<td>1951</td>
<td>2311,2729</td>
</tr>
<tr>
<td>2971</td>
<td>1489,2729</td>
</tr>
<tr>
<td>3079</td>
<td>2311,2473</td>
</tr>
</tbody>
</table>
<h2 id="assembling-the-picture">assembling the picture<a href="#assembling-the-picture" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>Assembling the picture turns out to be quite complex. First, we have to pick one of the four corner pieces and assume, this is our top-left tile.</p>
<p>Let&rsquo;s pick the aforementioned corner-tile 1951 as our top-left cornerpiece.</p>
<p>We now have to figure out how to transform it in a way, such that the matching edges are on the inside - or, we flip it around and look for the edges that face outwards.</p>
<h3 id="finding-the-outer-edges">finding the outer edges<a href="#finding-the-outer-edges" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<table>
<thead>
<tr>
<th>tile ids</th>
<th>number of tiles with that edge</th>
<th>edge hash</th>
</tr>
</thead>
<tbody>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
<tr>
<td>1427, 1489</td>
<td>2</td>
<td>948</td>
</tr>
<tr>
<td><strong>1951</strong></td>
<td><strong>1</strong></td>
<td><strong>177</strong></td>
</tr>
<tr>
<td><strong>1951</strong></td>
<td><strong>1</strong></td>
<td><strong>564</strong></td>
</tr>
<tr>
<td><strong>1951</strong></td>
<td><strong>1</strong></td>
<td><strong>587</strong></td>
</tr>
<tr>
<td><strong>1951</strong></td>
<td><strong>1</strong></td>
<td><strong>841</strong></td>
</tr>
<tr>
<td>1951, 2311</td>
<td>2</td>
<td>318</td>
</tr>
<tr>
<td>1951, 2729</td>
<td>2</td>
<td>397</td>
</tr>
<tr>
<td>1951, 2311</td>
<td>2</td>
<td>498</td>
</tr>
<tr>
<td>1951, 2729</td>
<td>2</td>
<td>710</td>
</tr>
<tr>
<td>2311</td>
<td>1</td>
<td>231</td>
</tr>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
</tbody>
</table>
<p>We now have to pick those transformations where the top <em>and</em> left edge have one of those hashes (177, 564, 587, 841)</p>
<h4 id="finding-correct-transformations-of-1951-to-make-it-a-cornerpiece-with-the-correct-edges-facing-outwards">finding correct transformations of 1951 to make it a cornerpiece with the correct edges facing outwards<a href="#finding-correct-transformations-of-1951-to-make-it-a-cornerpiece-with-the-correct-edges-facing-outwards" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>Here are the edge-configurations of every possible transformation of tile 1951.</p>
<table>
<thead>
<tr>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>Clockwise180</td>
<td>177</td>
<td>318</td>
<td>397</td>
<td>587</td>
</tr>
<tr>
<td>Clockwise90, FlipVertical</td>
<td>318</td>
<td>177</td>
<td>587</td>
<td>397</td>
</tr>
<tr>
<td>FlipHorizontal</td>
<td>397</td>
<td>498</td>
<td>177</td>
<td>841</td>
</tr>
<tr>
<td>Clockwise270</td>
<td>498</td>
<td>397</td>
<td>841</td>
<td>177</td>
</tr>
<tr>
<td><strong>FlipVertical</strong></td>
<td><strong>564</strong></td>
<td><strong>587</strong></td>
<td><strong>710</strong></td>
<td><strong>318</strong></td>
</tr>
<tr>
<td><strong>Clockwise90</strong></td>
<td><strong>587</strong></td>
<td><strong>564</strong></td>
<td><strong>318</strong></td>
<td><strong>710</strong></td>
</tr>
<tr>
<td>NoOp</td>
<td>710</td>
<td>841</td>
<td>564</td>
<td>498</td>
</tr>
<tr>
<td>FlipVertical, Clockwise90</td>
<td>841</td>
<td>710</td>
<td>498</td>
<td>564</td>
</tr>
</tbody>
</table>
<p>We now know, that there are only two valid transformations of tile 1951: FlipVertical and Clockwise90.</p>
<p>With this information we can orient the neighbors of 1951 properly.</p>
<h4 id="orienting-the-neighbors">orienting the neighbors<a href="#orienting-the-neighbors" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>We know from above that 1951 only has two possible neighbors.</p>
<table>
<thead>
<tr>
<th>tile id</th>
<th>matching tiles</th>
</tr>
</thead>
<tbody>
<tr>
<td>1951</td>
<td>2311,2729</td>
</tr>
</tbody>
</table>
<p>Let&rsquo;s expand that relationship further.</p>
<table>
<thead>
<tr>
<th style="text-align:right">tile1 id</th>
<th>transformation tile1</th>
<th>tile2 id</th>
<th>transformation tile2</th>
<th>match direction</th>
<th style="text-align:right">hash of matching edge</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right">1951</td>
<td>FlipVertical</td>
<td>2311</td>
<td>FlipVertical</td>
<td>horizontal</td>
<td style="text-align:right">318</td>
</tr>
<tr>
<td style="text-align:right">1951</td>
<td>FlipVertical</td>
<td>2729</td>
<td>FlipVertical</td>
<td>vertical</td>
<td style="text-align:right">564</td>
</tr>
<tr>
<td style="text-align:right">1951</td>
<td>Clockwise90</td>
<td>2729</td>
<td>Clockwise90</td>
<td>horizontal</td>
<td style="text-align:right">710</td>
</tr>
<tr>
<td style="text-align:right">1951</td>
<td>Clockwise90</td>
<td>2311</td>
<td>Clockwise90</td>
<td>vertical</td>
<td style="text-align:right">587</td>
</tr>
</tbody>
</table>
<p>We have two possibilities to arange these pieces</p>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2311 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 2729 FlipVertical <!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2729 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 2311 Clockwise90 <!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="heading"><a href="#heading" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>constraints</p>
<p>We know that the piece at (1,0) has to have its top edge outwards-facing.</p>
<table>
<thead>
<tr>
<th>tile ids</th>
<th>number of tiles with that edge</th>
<th>edge hash</th>
</tr>
</thead>
<tbody>
<tr>
<td>2311</td>
<td>1</td>
<td>231</td>
</tr>
<tr>
<td>2311</td>
<td>1</td>
<td>924</td>
</tr>
<tr>
<td>2729</td>
<td>1</td>
<td>271</td>
</tr>
<tr>
<td>2729</td>
<td>1</td>
<td>962</td>
</tr>
</tbody>
</table>
<p>Here are the tile-configurations of 2311 and 2729 after applying the possible transformations (FlipVertical and Clockwise90)</p>
<table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>2311</td>
<td>FlipVertical</td>
<td><strong>231</strong></td>
<td>318</td>
<td>210</td>
<td>616</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise90</td>
<td>318</td>
<td><strong>231</strong></td>
<td>616</td>
<td>210</td>
</tr>
<tr>
<td>2729</td>
<td>FlipVertical</td>
<td>710</td>
<td><strong>962</strong></td>
<td>85</td>
<td>9</td>
</tr>
<tr>
<td>2729</td>
<td>Clockwise90</td>
<td><strong>962</strong></td>
<td>710</td>
<td>9</td>
<td>85</td>
</tr>
</tbody>
</table>
<p>Let&rsquo;s examine 2311:</p>
<ul>
<li>if we put 2311 at (1,0) we have to apply FlipVertical. The the top edge has to be facing outwards, which it does (hash 231).</li>
<li>if we put 2311 at (0,1) we have to apply Clockwise90. The the left edge has to be facing outwards, which it does (hash 231).</li>
</ul>
<p>Let&rsquo;s examine 2729:</p>
<ul>
<li>if we put 2729 at (1,0) we have to apply Clockwise90. The the top edge has to be facing outwards, which it does (hash 962).</li>
<li>if we put 2729 at (0,1) we have to apply FlipVertical. The the left edge has to be facing outwards, which it does (hash 962).</li>
</ul>
<p>This doesn&rsquo;t help us either, since these configurations are still valid.</p>
<h4 id="finding-tiles-with-two-neighbors">finding tiles with two neighbors<a href="#finding-tiles-with-two-neighbors" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>We want to place the tile (1,1). It has to satisfy the following condition</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">   tile<span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">1</span><span style="color:#f92672">).</span>top  <span style="color:#f92672">==</span> tile<span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">0</span><span style="color:#f92672">).</span>bottom
<span style="color:#f92672">&amp;&amp;</span> tile<span style="color:#f92672">(</span><span style="color:#ae81ff">1</span><span style="color:#f92672">,</span><span style="color:#ae81ff">1</span><span style="color:#f92672">).</span>left <span style="color:#f92672">==</span> tile<span style="color:#f92672">(</span><span style="color:#ae81ff">0</span><span style="color:#f92672">,</span><span style="color:#ae81ff">1</span><span style="color:#f92672">).</span>right
</code></pre></div><table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>x</th>
<th>y</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>2311</td>
<td>FlipVertical</td>
<td>1</td>
<td>0</td>
<td>231</td>
<td>318</td>
<td>210</td>
<td>616</td>
</tr>
<tr>
<td>2729</td>
<td>FlipVertical</td>
<td>0</td>
<td>1</td>
<td>710</td>
<td>962</td>
<td>85</td>
<td>9</td>
</tr>
<tr>
<td>2729</td>
<td>Clockwise90</td>
<td>1</td>
<td>0</td>
<td>962</td>
<td>710</td>
<td>9</td>
<td>85</td>
</tr>
<tr>
<td>2311</td>
<td>Clockwise90</td>
<td>0</td>
<td>1</td>
<td>318</td>
<td>231</td>
<td>616</td>
<td>210</td>
</tr>
</tbody>
</table>
<p>This means we&rsquo;re looking for a tile t where</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">t.top == 210 &amp;&amp; t.left == 9 ||
t.top == 9   &amp;&amp; t.left == 210
</code></pre></div><table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>1427</td>
<td>Clockwise90</td>
<td>9</td>
<td>210</td>
<td>348</td>
<td>948</td>
</tr>
<tr>
<td>1427</td>
<td>FlipVertical</td>
<td>210</td>
<td>9</td>
<td>948</td>
<td>348</td>
</tr>
</tbody>
</table>
<p>We have still have two possibilities to arange these pieces.</p>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2311 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 2729 FlipVertical <!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 1427 FlipVertical <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2729 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 2311 Clockwise90 <!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 1427 Clockwise90 <!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h4 id="finding-the-top-right-corner-piece">finding the top right corner piece<a href="#finding-the-top-right-corner-piece" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>We can now look for the top right corner piece with one added constraint. Its left edge has to match the right edge of (1,0). The transformation has to orient the tile in a way that the top and right faces point outwards.</p>
<table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>2971</td>
<td>Clockwise90</td>
<td>78</td>
<td>85</td>
<td>689</td>
<td>161</td>
</tr>
<tr>
<td>3079</td>
<td>NoOp</td>
<td>702</td>
<td>616</td>
<td>184</td>
<td>264</td>
</tr>
</tbody>
</table>
<p>Still two possibilities to arrange our tiles.</p>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2311 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>3079 NoOp <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 2729 FlipVertical <!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 2729 FlipVertical <!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2729 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2971 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 2311 Clockwise90 <!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --> <!-- raw HTML omitted --> 1427 Clockwise90 <!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="finding-the-bottom-left-corner-piece">finding the bottom left corner piece<a href="#finding-the-bottom-left-corner-piece" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>We can now look for the bottom left corner piece with one added constraint. Its top edge has to match the bottom edge of (0,1). The transformation has to orient the tile in a way that the bottom and left faces point outwards.</p>
<table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>2971</td>
<td>FlipVertical</td>
<td>85</td>
<td>78</td>
<td>161</td>
<td>689</td>
</tr>
<tr>
<td>3079</td>
<td>FlipVertical, Clockwise90</td>
<td>616</td>
<td>702</td>
<td>264</td>
<td>184</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2311 FlipVertical <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>2</td>
<td><!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
<td>2729 Clockwise90 <!-- raw HTML omitted --> <!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>2</td>
<td><!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="mirrored-symmetry">mirrored symmetry<a href="#mirrored-symmetry" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>We see that it&rsquo;s going to continue to find two possibilities, since the whole thing can be mirrored. For completing the example we just pick the first configuration.
For that we place 2971 at (2,0) and 3079 at (0,2).</p>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1951 FlipVertical</td>
<td>2311 FlipVertical</td>
<td>3079 NoOp</td>
</tr>
<tr>
<td>1</td>
<td>2729 FlipVertical</td>
<td>1427 FlipVertical</td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>2971 FlipVertical</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td><!-- raw HTML omitted --></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="continue-to-fill-the-missing-pieces">continue to fill the missing pieces<a href="#continue-to-fill-the-missing-pieces" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<h4 id="12">(1,2)<a href="#12" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>1489</td>
<td>FlipVertical</td>
<td>948</td>
<td>689</td>
<td>848</td>
<td>288</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="21">(2,1)<a href="#21" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>2473</td>
<td>Clockwise90, FlipVertical</td>
<td>184</td>
<td>348</td>
<td>399</td>
<td>481</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>2</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="22">(2,2)<a href="#22" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>Yay - our last cornerpiece</p>
<table>
<thead>
<tr>
<th>id</th>
<th>transformation</th>
<th>top</th>
<th>left</th>
<th>bottom</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td>1171</td>
<td>FlipHorizontal</td>
<td>399</td>
<td>288</td>
<td>96</td>
<td>902</td>
</tr>
</tbody>
</table>
<h3 id="the-last-piece">the last piece<a href="#the-last-piece" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<table>
<thead>
<tr>
<th>y\x</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>1</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>2</td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h3 id="generalizing-the-rules">generalizing the rules<a href="#generalizing-the-rules" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<ul>
<li>pick one of the cornerpieces for (0,0) and orient it
<ul>
<li>top and left edges must face outwards</li>
<li>if there are more than one possible transformation, pick one of them</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scala" data-lang="scala">  <span style="color:#66d9ef">val</span> filterFn<span style="color:#66d9ef">:</span> <span style="color:#f92672">((</span><span style="color:#66d9ef">Int</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">Edge</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">List</span><span style="color:#f92672">[</span><span style="color:#66d9ef">Transformation</span><span style="color:#f92672">],</span> <span style="color:#a6e22e">BufferedImage</span><span style="color:#f92672">))</span> <span style="color:#66d9ef">=&gt;</span> <span style="color:#a6e22e">Boolean</span> <span style="color:#66d9ef">=</span> <span style="color:#f92672">{</span> row <span style="color:#66d9ef">=&gt;</span>
    <span style="color:#f92672">(</span>useTopTileFilter<span style="color:#f92672">,</span> useLeftTileFilter<span style="color:#f92672">)</span> <span style="color:#66d9ef">match</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">case</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>   <span style="color:#66d9ef">=&gt;</span> topTileFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> leftTileFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span>
      <span style="color:#66d9ef">case</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">)</span>  <span style="color:#66d9ef">=&gt;</span> topTileFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> leftOuterFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span>
      <span style="color:#66d9ef">case</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">)</span>  <span style="color:#66d9ef">=&gt;</span> leftTileFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> topOuterFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span>
      <span style="color:#66d9ef">case</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">)</span> <span style="color:#66d9ef">=&gt;</span> topOuterFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span> <span style="color:#f92672">&amp;&amp;</span> leftOuterFilter<span style="color:#f92672">(</span>row<span style="color:#f92672">)</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>

</code></pre></div><h2 id="finding-nessi">finding Nessi<a href="#finding-nessi" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h3 id="the-final-assembly">the final assembly<a href="#the-final-assembly" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<table>
<thead>
<tr>
<th>assembled image <!-- raw HTML omitted --> with borders</th>
<th>assembled image <!-- raw HTML omitted --> with highlighted border</th>
<th>final version <!-- raw HTML omitted --> with borders removed</th>
</tr>
</thead>
<tbody>
<tr>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
<td><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<h3 id="nessi">nessi<a href="#nessi" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>We have to find this pattern in the final image, but (of course) we don&rsquo;t know how the image has been transformed.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">                  #
#    ##    ##    ###
 #  #  #  #  #  #
</code></pre></div><p><!-- raw HTML omitted --></p>
<p>We transform the image in all 8 ways and search for the pattern in each image.</p>
<table>
<thead>
<tr>
<th>transformations</th>
<th>image</th>
</tr>
</thead>
<tbody>
<tr>
<td>NoOp</td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Clockwise90</td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Clockwise180</td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Clockwise270</td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>FlipHorizontal</td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>FlipVertical</td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>FlipVerticalClockwise90</td>
<td><!-- raw HTML omitted --></td>
</tr>
<tr>
<td>Clockwise90FlipVertical</td>
<td><!-- raw HTML omitted --></td>
</tr>
</tbody>
</table>
<h2 id="the-final-image">The final image<a href="#the-final-image" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p><!-- raw HTML omitted --></p>
<p>We need to count the number of water-pixels that are not occupied by a sea monster.
I don&rsquo;t know if the sea monsters would overlap, so I selected all sea-monster pixels and diffed it with all water-pixels.</p>
<p><!-- raw HTML omitted --></p>
<table>
<thead>
<tr>
<th>sea-monster sightings</th>
<th>sea-monster pixels</th>
<th>water pixels</th>
<th>diff</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>30</td>
<td>303</td>
<td>273 (our answer)</td>
</tr>
</tbody>
</table>
<h2 id="solution-for-part-2">Solution for part 2<a href="#solution-for-part-2" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>The solution for the random seed of my user looked like this</p>
<p><!-- raw HTML omitted --></p>
<table>
<thead>
<tr>
<th>sea-monster sightings</th>
<th>sea-monster pixels</th>
<th>water pixels</th>
<th>diff</th>
</tr>
</thead>
<tbody>
<tr>
<td>19</td>
<td>285</td>
<td>1914</td>
<td>1629 (our answer)</td>
</tr>
</tbody>
</table>
<p>Turned out there were no overlapping sea monsters ;-)</p>
<p>Great fun, but quite complex to solve. I could have done it a lot simpler, but I enjoyed the programming with graphics.</p>
      </div></div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span> 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>







  
</div>

</body>
</html>
